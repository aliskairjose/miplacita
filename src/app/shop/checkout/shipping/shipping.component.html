<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-spin-clockwise" [fullScreen]="true">
	<p style="color: white"> Por favor espere... </p>
</ngx-spinner>

<section class="section-b-space">
	<div class="container padding-cls">
		<div class="checkout-page">
			<div class="checkout-form">
				<form>
					<div class="row mb-5">
						<div class="col-lg-6 col-sm-12 col-xs-12">
							<div class="border-box">
								<div class="checkout-title">
									<h3>Mis datos/ Dirección</h3>
									<p> Completa estos datos para que tu vendedor sepa donde te encuentras ubicado</p>
									<div class="alert alert-primary" role="alert" [hidden]="hideMessage">
										¿Desea continuar como invitado o <a [routerLink]="['/home/login', {projectTeam: true}]"><b>iniciar
												sesión</b></a> ?
									</div>
								</div>
								<form [formGroup]="checkoutForm" class="theme-form">
									<div class="row check-out">
										<div class="form-group col-md-6 col-sm-6 col-xs-12">
											<div class="field-label">Nombre</div>
											<input type="text" name="name" [formControl]="checkoutForm.controls['name']" value=""
												placeholder="" autocomplete="off">
											<div *ngIf="submitted && checkoutForm.controls.name.errors?.required"
												class="text text-danger">
												Nombre es requerido.
											</div>
											<div *ngIf="submitted && checkoutForm.controls.name.errors?.pattern"
												class="text text-danger">
												Name debe ser sólo letras.
											</div>
										</div>
										<div class="form-group col-md-6 col-sm-6 col-xs-12">
											<div class="field-label">Apellido </div>
											<input type="text" name="last_name" [formControl]="checkoutForm.controls['last_name']" value=""
												placeholder="" autocomplete="off">
											<div *ngIf="submitted && checkoutForm.controls.last_name.errors?.required"
												class="text text-danger">
												Apellido es requerido.
											</div>
											<div *ngIf="submitted && checkoutForm.controls.last_name.errors?.pattern" class="text text-danger">
												Apellido debe ser sólo letras.
											</div>
										</div>
										<div class="form-group col-md-6 col-sm-6 col-xs-12">
											<div class="field-label">Teléfono</div>
											<input mask="(+000) 000-00-00" type="tel" name="phone"
												[formControl]="checkoutForm.controls['phone']" value="" placeholder="" autocomplete="off">
											<div *ngIf="submitted && checkoutForm.controls.phone.errors?.required" class="text text-danger">
												Teléfono es requerido.
											</div>
											<div *ngIf="submitted && checkoutForm.controls.phone.errors?.pattern" class="text text-danger">
												Teléfono debe ser un número válido.
											</div>
										</div>
										<div class="form-group col-md-6 col-sm-6 col-xs-12">
											<div class="field-label">Email</div>
											<input type="text" name="email" [formControl]="checkoutForm.controls['email']" value=""
												placeholder="" autocomplete="off">
											<div *ngIf="submitted && checkoutForm.controls.email.errors?.required" class="text text-danger">
												Email es requerido
											</div>
											<div *ngIf="submitted && checkoutForm.controls.email.errors?.email" class="text text-danger">
												Email inválido
											</div>
										</div>
										<div class="form-group col-md-12 col-sm-12 col-xs-12">
											<div class="field-label">Dirección</div>
											<textarea id="exampleFormControlTextarea1" type="text" name="address"
												[formControl]="checkoutForm.controls['address']" [value]="address" placeholder=""
												autocomplete="off" ngx-google-places-autocomplete [options]='options' #placesRef="ngx-places"
												(onAddressChange)="handleAddressChange($event)"></textarea>
											<div *ngIf="submitted && checkoutForm.controls.address.errors?.required" class="text text-danger">
												Dirección requerida
											</div>
											<div *ngIf="submitted && checkoutForm.controls.address.errors?.maxlength"
												class="text text-danger">
												Maximum 50 character
											</div>
										</div>
										<div class="form-group col-md-12 col-sm-12 col-xs-12 maps">
											<div class="border-box h-100">
												<div class="shipping-options d-flex flex-column h-100">
													<div class="checkout-title">
														<label>Seleccione la dirección de envío</label>
													</div>
													<agm-map [latitude]="latitude" [longitude]="longitude" [zoom]="zoom">
														<agm-marker [latitude]="latitude" [longitude]="longitude" [markerDraggable]="true"
															(dragEnd)="markerDragEnd($event)"></agm-marker>
													</agm-map>
												</div>
											</div>
										</div>
										<div class="form-group col-md-12 col-sm-12 col-xs-12">
											<div class="field-label">Punto de referencia</div>
											<textarea id="exampleFormControlTextarea1" type="text" name="reference"
												[formControl]="checkoutForm.controls['reference']" value="" placeholder=""
												autocomplete="off"></textarea>
										</div>
									</div>
								</form>
							</div>
						</div>
						<div class="col-lg-6 col-sm-12 col-xs-12">
							<div class="border-box h-100">
								<div class="shipping-options d-flex flex-column h-100">
									<div class="checkout-title">
										<h3>Opciones de envío</h3>
										<p> Completa estos datos para que tu vendedor sepa donde te encuentras ubicado
										</p>
									</div>
									<form class="theme-form">
										<div class="shipping-option" *ngIf="shipmentOptions.length">
											<div *ngFor="let shipmentOption of shipmentOptions">
												<p class="h5">{{shipmentOption.name}}</p>
												<div *ngFor="let item of shipmentOption.shopOptions; let i=index">
													<div class="row mb-3">
														<div class="option-box d-flex mx-auto py-3">
															<div class="col-md-6">
																<p class="my-auto">{{item.name}} - {{item.price | currency }}</p>
															</div>
															<div class="col offset-xl-4 text-center">
																<input class="my-auto" type="radio" [checked]="i === 0" [value]="item._id"
																	[name]="shipmentOption.name"
																	(change)="selectOption(shipmentOption.id, $event.target.value )">
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</form>
									<div class="button-box d-flex justify-content-end align-items-end">
										<div class="text-right">
											<a (click)="checkout()" class="btn btn-solid">Finalizar</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>